---
interface Props {
  href?: string;
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link';
  size?: 'sm' | 'md' | 'lg';
  class?: string;
  type?: "button" | "submit" | "reset";
  target?: string;
  rel?: string;
}

const { 
  href, 
  variant = 'primary', 
  size = 'md', 
  class: className,
  type = "button",
  target,
  rel
} = Astro.props;

const baseStyles = "inline-flex items-center justify-center font-display font-semibold transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-700 disabled:opacity-50 disabled:cursor-not-allowed";

const variants = {
  primary: "bg-teal-700 text-white hover:bg-teal-800 shadow-md hover:shadow-lg hover:-translate-y-0.5",
  secondary: "bg-stone-200 text-stone-900 hover:bg-stone-300 shadow-sm",
  outline: "border-2 border-stone-300 text-stone-700 hover:border-teal-700 hover:text-teal-700 bg-transparent",
  ghost: "text-stone-600 hover:bg-stone-100 hover:text-stone-900",
  link: "text-teal-700 hover:text-teal-900 underline-offset-4 hover:underline p-0 h-auto"
};

const sizes = {
  sm: "text-sm px-3 py-1.5 gap-1.5",
  md: "text-base px-5 py-2.5 gap-2",
  lg: "text-lg px-7 py-3.5 gap-2.5"
};

// Override sizes for link variant to avoid padding issues
if (variant === 'link') {
  sizes.sm = "text-sm gap-1";
  sizes.md = "text-base gap-1";
  sizes.lg = "text-lg gap-1";
}

const computedClass = [
  baseStyles,
  variants[variant],
  sizes[size],
  className
].join(" ");
---

{
  href ? (
    <a href={href} class={computedClass} target={target} rel={rel}>
      <slot name="icon-left" />
      <slot />
      <slot name="icon-right" />
    </a>
  ) : (
    <button type={type} class={computedClass}>
      <slot name="icon-left" />
      <slot />
      <slot name="icon-right" />
    </button>
  )
}